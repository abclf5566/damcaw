<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>深度買賣計算器</title>

  <!-- 預防白屏 -->
  <style>html[data-theme="dark"]{background:#121212}</style>
  <script>
    /* --- 在頁面尚未渲染前決定主題 --- */
    const saved   = localStorage.getItem('prefersDark');      // 'true' | 'false' | null
    const useDark = saved === 'true'
          ? true
          : saved === 'false'
          ? false
          : matchMedia('(prefers-color-scheme: dark)').matches;
    document.documentElement.dataset.theme = useDark ? 'dark' : 'light';
    if (useDark) document.documentElement.style.background = '#121212';
  </script>

  <link rel="stylesheet" href="style.css?v=20250426a" />
</head>

<body>
  <!-- ───────── 主卡片 ───────── -->
  <div class="calculator">
    <h2>📊 深度買賣計算器（CoinEx &amp; Pionex）</h2>

    <!-- 深色切換 -->
    <label for="darkToggle">
      <input type="checkbox" id="darkToggle" />
      🌙 深色模式
    </label>

    <!-- 表單列 -->
    <div class="form-row">
      <div>
        <label>交易所:
          <select id="exchange">
            <option value="coinex">CoinEx</option>
            <option value="pionex">Pionex</option>
          </select>
        </label>
      </div>

      <div>
        <label>代幣:
          <input id="symbol" list="symbolList" autocomplete="on" />
        </label>
        <datalist id="symbolList"></datalist>
      </div>

      <div>
        <label>金額/數量:
          <input id="amount" type="number" value="1000" />
        </label>
      </div>

      <div>
        <label>操作:
          <select id="action">
            <option value="buy">買入</option>
            <option value="sell">賣出</option>
          </select>
        </label>
      </div>

      <div>
        <label>手續費(%):
          <input id="fee" type="number" value="0.1" />
        </label>
      </div>

      <div>
        <label for="cet">
          <input type="checkbox" id="cet" />
          CET 折扣
        </label>
      </div>
    </div>

    <!-- 計算結果 -->
    <div id="result"></div>
    <div id="error"></div>
  </div>

  <!-- 新增計算器按鈕 -->
  <button id="addCalculator">➕ 新增計算器</button>

  <!-- 功能腳本 -->
  <script type="module" src="app.js?v=20250526a"></script>
</body>
</html>
